
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var inputAttributes = Model.ReadOnly ? (object)new { disabled="disabled", @readonly="readonly" } : (object)new {};
    var checkboxAttributes = Model.ReadOnly ? (object)new { @class = "toggle", disabled = "disabled", @readonly = "readonly" } : (object)new { @class = "toggle" };
}

@model CalledThat.ViewModels.AddPicksViewModel
    <div class="col-lg-12">
        <h1 class="page-header">Pick scores - Gameweek @Model.Gameweek</h1>
        <p class="text-muted">Selection Opens/Closes: @Model.OpenDateTime.ToString("dd-MMM-yyyy HH:mm") / @Model.CloseDateTime.ToString("dd-MMM-yyyy HH:mm") </p>
    </div>

@using (Html.BeginForm("Index", "Game", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.PlayerId)

    <table class="table">
        @for (var i = 0; i < Model.PickItems.Count; i++)
        {
            @Html.HiddenFor(m => Model.PickItems[i].FixtureId)
            @Html.HiddenFor(m => Model.PickItems[i].HomeTeamBadgeUrl)
            @Html.HiddenFor(m => Model.PickItems[i].AwayTeamBadgeUrl)
            @Html.HiddenFor(m => Model.PickItems[i].HomeTeamName)
            @Html.HiddenFor(m => Model.PickItems[i].AwayTeamName)
            var item = Model.PickItems[i];
            if (i == 0)
            {
                <tr>
                    <td></td>
                    <td></td>
                    @*<td></td>
                    <td></td>*@
                    <td></td>
                    <td></td>
                    <td>Banker</td>
                    <td>Double</td>
                </tr>
            }

            <tr>
                <td style="width:10%"><img src="@item.HomeTeamBadgeUrl" width="50" height="50" /></td>
                <td style="width:10%">
                    @Html.TextBoxFor(m => m.PickItems[i].HomeScore, inputAttributes)
                <br /> @Html.ValidationMessageFor(m => m.PickItems[i].HomeScore)
            </td>

            <td style="width:10%">
                @Html.TextBoxFor(m => m.PickItems[i].AwayScore, inputAttributes)
            <br /> @Html.ValidationMessageFor(m => m.PickItems[i].AwayScore)
        </td>
        <td style="width:10%"><img src="@item.AwayTeamBadgeUrl" width="50" height="50" /></td>
        <td style="width:10%">
            @Html.CheckBoxFor(m => m.PickItems[i].Banker, checkboxAttributes)
        </td>
        <td style="width:10%">
            @Html.CheckBoxFor(m => m.PickItems[i].Double, checkboxAttributes)
        </td>
    </tr>
        }
    </table>
    <br />
    if (Model.ReadOnly)
    {
        <input type="submit" name="submit" class="btn btn-primary btn-lg btn-block" value="Submit" disabled readonly />
    }
    else
    {
        <input type="submit" name="submit" class="btn btn-primary btn-lg btn-block" value="Submit" />
    }
}

@section scripts {
    <script>
        $(".toggle").bootstrapSwitch();
    </script>
}
